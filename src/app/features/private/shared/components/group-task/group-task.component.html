<nz-card>

  @if (mode()==GroupPreviewMode.ADMIN)
  {
    <button nz-button nzShape="circle" (click)="deleteTask()">
      <nz-icon nzType="delete"></nz-icon>
    </button>
    <button nz-button nzShape="circle" (click)="accept()">
      Accept Task
    </button>
  }
  <h1>{{task().taskDto.title}}</h1>
  <div>
        @for (participant of task().groupTaskMembers; track participant.groupMemberId)
        {
            <span>{{participant.groupMemberId}} </span>
        }
  </div>
  <button nz-button nzShape="circle" (click)="editTask()">
    <nz-icon nzType="setting"></nz-icon>
  </button>

  <button nz-button nzShape="circle" (click)="manageParticipants()">
    <nz-icon nzType="team"></nz-icon>
  </button>

    @if (userIsParticipant()!=null)
    {

      @if(checkIfTaskIsCompletedByUser()){
        <button nz-button nzShape="circle" (click)="removeCompletion()">
          <nz-icon nzType="undo"></nz-icon>
        </button>

      }
      @else
      {
        <button nz-button nzShape="circle" (click)="complete()">
          <nz-icon nzType="check"></nz-icon>
        </button>
        }
    }
</nz-card>

<app-group-task-form
[groupId]="group().groupId"
[task]="task()"
(formSubmitted)="onUpdate()"
>
</app-group-task-form>

<app-group-task-members-manager
  [groupId]="group().groupId"
  [task]="task()"
  [membersList]="membersList()"
  (changed)="checkUserIsParticipant()"
>
</app-group-task-members-manager>
