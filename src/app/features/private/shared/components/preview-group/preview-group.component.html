<div class="preview-container">
  <nz-spin [nzSpinning]="loading()" nzSize="large">
    <nz-card *ngIf="group()" class="group-card">
      <div class="group-header">
        <h1 class="group-name">{{ group()!.groupName }}</h1>
        <app-group-type-tag
          [typeTitle]="group()!.groupType.title"
        ></app-group-type-tag>
      </div>

      <div class="group-info">
        <div class="info-item">
          <span nz-icon nzType="key" class="info-icon"></span>
          <div class="info-content">
            <span class="info-label">Join Code</span>
            <span class="info-value">{{ group()!.joinCode }}</span>
          </div>
        </div>

        <div class="info-item">
          <span nz-icon nzType="team" class="info-icon"></span>
          <div class="info-content">
            <span class="info-label">Members</span>
            <span class="info-value">
              {{ group()!.membersCount || 0 }}
              <span *ngIf="group()!.membersLimit" class="limit"
                >/ {{ group()!.membersLimit }}</span
              >
            </span>
          </div>
        </div>

        <div class="info-item" *ngIf="group()!.groupCurrencySymbol">
          <span nz-icon nzType="dollar" class="info-icon"></span>
          <div class="info-content">
            <span class="info-label">Currency</span>
            <span class="info-value">{{ group()!.groupCurrencySymbol }}</span>
          </div>
        </div>

        <div class="info-item">
          <span nz-icon nzType="crown" class="info-icon"></span>
          <div class="info-content">
            <span class="info-label">Admin ID</span>
            <span class="info-value">{{ group()!.adminId }}</span>
          </div>
        </div>
      </div>

      <div class="action-section">
        <button
          nz-button
          nzType="primary"
          nzSize="large"
          nzBlock
          (click)="onButtonClick()"
          [disabled]="buttonDisabled()"
        >
          <span nz-icon nzType="plus-circle"></span>
          {{ buttonText() }}
        </button>

        <p
          *ngIf="
            group() &&
            group()!.membersLimit &&
            group()!.membersCount! >= group()!.membersLimit!
          "
          class="limit-warning"
        >
          Group has reached the member limit
        </p>
      </div>
    </nz-card>

    <nz-card *ngIf="!group() && !loading()" class="error-card">
      <div class="error-content">
        <span nz-icon nzType="exclamation-circle" class="error-icon"></span>
        <h2>Group Not Found</h2>
        <p>The group with the given ID does not exist or has been deleted.</p>
      </div>
    </nz-card>
  </nz-spin>
</div>
