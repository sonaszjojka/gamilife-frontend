<div class="preview-container">
  <nz-spin [nzSpinning]="loading()" nzSize="large">
    <div class="page-layout-container">
      <div class="group-info-container">
        <div class="group-info-desc-container">
          <app-group-info-card *ngIf="group()" [group]="group()!">
            <app-group-actions
              [group]="group()!"
              [mode]="mode()"
              (actionComplete)="onActionComplete()"
            ></app-group-actions>
          </app-group-info-card>
        </div>

        <div
          class="members-list-container"
          *ngIf="group() && mode() !== GroupPreviewMode.PUBLIC"
        >
          <app-members-list-peak [membersList]="membersList()">
          </app-members-list-peak>
          <button
            *ngIf="group() && mode() === GroupPreviewMode.ADMIN"
            nz-button
            nzType="default"
            nzSize="large"
            nzBlock
            (click)="goToManageGroupMembersPage()"
          >
            <span nz-icon nzType="team"></span>
            Manage Members
          </button>
        </div>
      </div>

      <div class="tasks-list"></div>

      <div
        class="group-admin-actions"
        *ngIf="group() && mode() === GroupPreviewMode.ADMIN"
      >
        <app-group-admin-actions
          [group]="group()!"
          [members]="membersList()"
          (actionComplete)="onActionComplete()"
        ></app-group-admin-actions>
      </div>

      <nz-card *ngIf="!group() && !loading()" class="error-card">
        <div class="error-content">
          <span nz-icon nzType="exclamation-circle" class="error-icon"></span>
          <h2>Group Not Found</h2>
          <p>The group with the given ID does not exist or has been deleted.</p>
        </div>
      </nz-card>
    </div>
  </nz-spin>
</div>
